---
title: "Replication of Inferring Whether Officials Are Corruptible From Looking at Their Faces by Lin, Adolphs & Alvarez (2018, Psychological Science)"
author: "Rondeline Williams (rondeline.williams@stanford.edu)"
date: "`r format(Sys.time(), '%B %d, %Y')`"
output:
  html_document:
    toc: yes
    toc_depth: 3
    toc_float:
      collapsed: false
---

##Introduction

The current study seeks to replicate findings from "Replication of Inferring Whether Officials Are Corruptible From Looking at Their Faces." I chose to replicate this study because it is outside my area of study (social psychology), but not my field (psychology). I currently study children's language development as a function of environmental factors such as auditory noise and have never had the opportunity to study adult behavior. In experiment 1 of this study, the researchers explored how adults used photos of unfamiliar state and federal officials to determine an official's level of agression, deception, and corruptibility. Results indicated that state and federal officials who were convicted of political corruption were viewed as more dishonest asnd deceptive than their peers with clean records.
The most challenging part of completing this replication study will be creating the set of photos/Likert scales to be uploaded to Mechanical Turk. Fortunately, the authors have provided additional information regarding their methods on OSF.

##Methods

###Participants
In line with the original paper, this study included 22 participants from Amazon Mechanical Turk (MTurk). Participants were 18 years of age or older, native English speakers, and located in the United States. Additionally, they completed high school or more and had normal or corrected-to-normal vision. All participants obtained a human intelligence task (HIT) approval rate of at least 95% and successfully completed 1000 or more assignments on MTurk. 

###Power Analysis

Original effect size, power analysis for samples to achieve 80%, 90%, 95% power to detect that effect size.  Considerations of feasibility for selecting planned sample size.

###Planned Sample

This replication has a planned sample size of 22. Participants must be 18 years of age or older, native or bilingual English speakers, and have normal or corrected-to-normal vision. Participants not meeting any of the above criteria will be excluded from analysis.

###Materials

All materials were collected in line with Lin et al. (2018) as follows. "Stimuli were photos of 72 real elected officials.All were Caucasian males who have held federal or state legislative offices in the United States. Photos were official headshots obtained from government websites and
personal campaign websites (63%), news articles (23%), and
Wikipedia (14%). All photos were converted to gray-scale 
Facial Inferences and Corruption 1809 images on a plain gray background and cropped to a uniform size. All faces were frontal, smiling, in clear focus, and centered in the middle of the image.
Among the 72 officials, half were convicted of
political corruption (corrupt officials), and the other
half had clean records (noncorrupt officials). The corrupt officials were from two Wikipedia data sets (list of
American state and local politicians convicted of crimes:
https://en.wikipedia.org/wiki/List_of_American_state_
and_local_politicians_convicted_of_crimes; list of
American federal politicians convicted of crimes:
https://en.wikipedia.org/wiki/List_of_American_fed
eral_politicians_convicted_of_crimes). To reduce
sources of variability, we included only officials who
were Caucasian, were male, held federal or state legislative offices, and were convicted between 2001 and 2016 of political corruption conducted while in office (bribery, money laundering, embezzlement, mail fraud, wire
fraud, tax fraud, conflict of interest, misusing funds,
misusing office, or falsifying records). In addition, age
information for these officials had to be publicly available, as did frontal photographs of acceptable clarity
in which the official was smiling. All photographs had
been taken while officials were in office. Most photos
of the corrupt officials had a known creation date, and
we confirmed that the photos were taken before their
conviction (72%); for the rest of the photos (28%), the
creation date was unknown (analyses were also performed when excluding data for these stimuli; the pattern of results did not change). The noncorrupt officials
were randomly matched from the list of incumbents
who had clean records, were holding the same office
in the same state, and were of the same gender, the
same race, and similar age (±12 years) as the corrupt
officials during the period of their misconduct. For
instance, if the stimuli contained a Caucasian male corrupt official who was a member of the Arizona House
of Representatives during his misconduct at the age of
55, then a noncorrupt official would be randomly
selected from our available stimulus set from the list of
Arizona House of Representatives incumbents who had
a clean record and who was a Caucasian male between
the ages of 43 and 67."

###Procedure	

The current study followed the original paper precisely. "Participants were not informed of the purpose of the study or the sampling of the stimuli. In particular, they were not given any information about the percentage of politicians in our stimulus set who might
be corrupt in real life. They were told only that they
would view a series of politician photos and that they
should judge how corruptible, dishonest, selfish, trustworthy, and generous these politicians looked to them
(experiment instructions are available at https://osf.io/
k4mds/). Participants completed five blocks of experiments, with each block corresponding to judging one trait
for all faces. The ordering of the faces within each block
as well as the ordering of the blocks were randomized.
Each block started with an instruction screen that
specified the trait to be judged (e.g., corruptibility).
Participants were instructed to make their decisions as
quickly and precisely as possible. Six practice trials
familiarized participants with the task. Participants
viewed photos of officials one at a time in randomized
order and made judgments. Each trial began with a
fixation cross, followed by the photo (1 s) with a 5-point
Likert scale below it. Scales were anchored with bipolar
adjectives. Participants could make a decision
as soon as the photo appeared and within 4 s after the
photo disappeared. The orientation of the scale was
randomized across blocks, and scores were reversecoded as needed.
After completing all five blocks of ratings, participants were asked whether they had recognized any of
the officials and filled out a short survey questionnaire on demographic characteristics, political attitudes, and
personality."

###Analysis Plan

Can also quote directly, though it is less often spelled out effectively for an analysis strategy section.  The key is to report an analysis strategy that is as close to the original - data cleaning rules, data exclusion rules, covariates, etc. - as possible.  

Key analysis of interest - one-tailed t-test

###Differences from Original Study

The current study included the same stimuli from experiment one of the original study, as well as the inclusion of breaks during the session. However, the current study employs breaks of up to 30 seconds at every 15th stimulus item, but the original article did not specify how breaks were taken. Additionally, the current study required fewer participants because the original effect size was impressively large. Finally, the current study included any responses submitted after the stimulus was presented, which differed from the original study's restriction of ending the trial if a response was not submitted within 4s after the stimulus was presented.

### Methods Addendum (Post Data Collection)

To be collected

#### Actual Sample
  
To be collected 

#### Differences from pre-data collection methods plan

  Any differences from what was described as the original plan, or “none”.

##Results


### Data preparation

Data preparation following the analysis plan.
	
```{r include=F}
###Data Preparation
#Here, I will prepare to import dataset from MTurk. The next sections further outline this plan

####Load Relevant Libraries and Functions
library(tidyverse)
library(ggplot2) 
library(rmcorr)
library(lme4)
library(ICC)
library(ggthemes)
library(plotrix)
library(psych)
library(mada)
library(powerAnalysis)

```

### Confirmatory analysis

####################################### Analysis 1: ICC(2,k) #######################################

```{r}
# please adjust the directory to the file location on your computer
# ICC were calcuated based on complete cases as recommended by the package
# ICC for Corruptibility Ratings
data1 <- read.csv("C:/Users/rmw23/corruption_experiment/Study1_Corruptible.csv", header=TRUE)
ICC(na.omit(data1[,2:83]), alpha=.05)
# ICC for Dishonesty Ratings
data2 <- read.csv(file = "C:/Users/rmw23/corruption_experiment/Study1_Dishonest.csv", header=TRUE)
ICC(na.omit(data2[,2:83]), alpha=.05)
# ICC for Selfishness Ratings
data3 <- read.csv(file = "C:/Users/rmw23/corruption_experiment/Study1_Selfish.csv", header=TRUE)
ICC(na.omit(data3[,2:83]), alpha=.05)
# ICC for Trustworthiness Ratings
data4 <- read.csv(file = "C:/Users/rmw23/corruption_experiment/Study1_Trustworthy.csv", header=TRUE)
ICC(na.omit(data4[,2:83]), alpha=.05)
# ICC for Generosity Ratings
data5 <- read.csv(file = "C:/Users/rmw23/corruption_experiment/Study1_Generous.csv", header=TRUE)
ICC(na.omit(data5[,2:83]), alpha=.05)

```

####################################### Analysis 2: Consistency #######################################
# --------- Individual level ---------

```{r}
ind_C <- c()
for(j in c(2:ncol(data1))) {
  ind_C <- c(ind_C, data1[,j])
}
ind_D <- c()
for(j in c(2:ncol(data2))) {
  ind_D <- c(ind_D, data2[,j])
}
ind_S <- c()
for(j in c(2:ncol(data3))) {
  ind_S <- c(ind_S, data3[,j])
}
ind_T <- c()
for(j in c(2:ncol(data4))) {
  ind_T <- c(ind_T, data4[,j])
}
ind_G <- c()
for(j in c(2:ncol(data5))) {
  ind_G <- c(ind_G, data5[,j])
}
imageID <- rep(c(1:72),82)
subFULL <- c(1:100)
subExclude <- c(3,4,9,10,15,16,18,19,47,50,53,56,67,68,78,94,97,98)
subID <- c()
for (i in (setdiff(subFULL,subExclude))) {subID <- c(subID, rep(i,72))}
ind_data <- data.frame(cbind(subID, imageID, ind_C, ind_D, ind_S, ind_T, ind_G))
ind_data_noMissing <- ind_data[(!(is.na(ind_data$ind_C))) & (!(is.na(ind_data$ind_D))) & (!(is.na(ind_data$ind_S))) & (!(is.na(ind_data$ind_T))) & (!(is.na(ind_data$ind_G))),]
```

# --------- Aggregate level ---------
# Corruptibility, calculate for each offcial his rating averaged over participants
```{r}
agg_C <- c()
for (i in c(1:nrow(data1))) {
  temp <- mean(as.numeric(data1[i,2:83]), na.rm = TRUE)
  agg_C <- c(agg_C, temp)}
# Dishonesty, calculate for each offcial his rating averaged over participants
agg_D <- c()
for (i in c(1:nrow(data2))) {
  temp <- mean(as.numeric(data2[i,2:83]), na.rm = TRUE)
  agg_D <- c(agg_D, temp)}
# Selfishness, calculate for each offcial his rating averaged over participants
agg_S <- c()
for (i in c(1:nrow(data3))) {
  temp <- mean(as.numeric(data3[i,2:83]), na.rm = TRUE)
  agg_S <- c(agg_S, temp)}
# Trustworthiness, calculate for each offcial his rating averaged over participants
agg_T <- c()
for (i in c(1:nrow(data4))) {
  temp <- mean(as.numeric(data4[i,2:83]), na.rm = TRUE)
  agg_T <- c(agg_T, temp)}
# Generosity, calculate for each offcial his rating averaged over participants
agg_G <- c()
for (i in c(1:nrow(data5))) {
  temp <- mean(as.numeric(data5[i,2:83]), na.rm = TRUE)
  agg_G <- c(agg_G, temp)}

# merge all data frames 
total <- 
  do.call("cbind", list(agg_C, agg_D, agg_G, agg_S, agg_T)) 

# change column names
colnames(total) <- c("Corruptibility", "Dishonesty", "Generosity", "Selfishness", "Trustworthiness")

#make data tidy
total = as.data.frame(total)
total = lapply(total, as.numeric)
total = as.data.frame(total)
str(total)

total_tidy <- total %>% 
  mutate(Image_ID = 1:nrow(total)) %>% 
  mutate(Corrupt = ifelse(Image_ID <= 36, "Corrupt", "Clean")) %>% 
  pivot_longer(names_to = "Scale", values_to = "Rating", Corruptibility:Trustworthiness)

total_grouped <- total_tidy %>% 
  group_by(Scale, Corrupt) %>% 
  summarise(Average_Rating = mean(Rating),
            sem_rating = std.error(Rating))

# plot regression
ggplot(total_grouped, aes(x = Corrupt, y = Average_Rating, fill = Corrupt)) + 
  geom_bar(position= "dodge", stat= "identity") + 
  geom_errorbar(aes(ymin = (Average_Rating - sem_rating), ymax = (Average_Rating + sem_rating)), width = .5, position = "dodge") +
  facet_wrap(~Scale)+
  theme_few() +
  scale_color_brewer(palette = "Set1") +
  theme(axis.ticks.x = element_blank(),axis.text.x = element_blank())

# Aggregate data
agg_data <- data.frame(cbind(agg_C, agg_D, agg_S, agg_T, agg_G))
cor.test(agg_data$agg_C, agg_data$agg_D, alternative = "two.sided", method = "spearman", exact = FALSE)
CIrho(0.8791505, 72, level = 0.95)
cor.test(agg_data$agg_C, agg_data$agg_S, alternative = "two.sided", method = "spearman", exact = FALSE)
CIrho(0.8411162, 72, level = 0.95)
cor.test(agg_data$agg_C, agg_data$agg_T, alternative = "two.sided", method = "spearman", exact = FALSE)
CIrho(-0.8420634, 72, level = 0.95)
cor.test(agg_data$agg_C, agg_data$agg_G, alternative = "two.sided", method = "spearman", exact = FALSE)
CIrho(-0.7522113, 72, level = 0.95)
cor.test(agg_data$agg_D, agg_data$agg_S, alternative = "two.sided", method = "spearman", exact = FALSE)
CIrho(0.853138, 72, level = 0.95)
cor.test(agg_data$agg_D, agg_data$agg_T, alternative = "two.sided", method = "spearman", exact = FALSE)
CIrho(-0.8715914, 72, level = 0.95)
cor.test(agg_data$agg_D, agg_data$agg_G, alternative = "two.sided", method = "spearman", exact = FALSE)
CIrho(-0.8262261, 72, level = 0.95)
cor.test(agg_data$agg_S, agg_data$agg_T, alternative = "two.sided", method = "spearman", exact = FALSE)
CIrho(-0.8342407, 72, level = 0.95)
cor.test(agg_data$agg_S, agg_data$agg_G, alternative = "two.sided", method = "spearman", exact = FALSE)
CIrho(-0.8323724, 72, level = 0.95)
cor.test(agg_data$agg_T, agg_data$agg_G, alternative = "two.sided", method = "spearman", exact = FALSE)
CIrho(0.8882715, 72, level = 0.95)
```

######### Analysis 3 & 4: Association between Trait judgments and Actual Records of Conviction #########
# --------- Aggregate level ---------
```{r}
agg_data$officialID <- cbind(c(1:72))
agg_data$convicted <- cbind(c(rep(1,36), rep(0,36)))
acc_C <- 0
for(i in c(1:36)) {if(agg_data$agg_C[i]>3){acc_C<-acc_C+1}}
for(i in c(37:72)) {if(agg_data$agg_C[i]<=3){acc_C<-acc_C+1}}
prop.test(x = acc_C, n=72, p = 0.5,alternative ="greater",conf.level = 0.95)
acc_D <- 0
for(i in c(1:36)) {if(agg_data$agg_D[i]>3){acc_D<-acc_D+1}}
for(i in c(37:72)) {if(agg_data$agg_D[i]<=3){acc_D<-acc_D+1}}
prop.test(x = acc_D, n=72, p = 0.5,alternative ="greater",conf.level = 0.95)
acc_S <- 0
for(i in c(1:36)) {if(agg_data$agg_S[i]>3){acc_S<-acc_S+1}}
for(i in c(37:72)) {if(agg_data$agg_S[i]<=3){acc_S<-acc_S+1}}
prop.test(x = acc_S, n=72, p = 0.5,alternative ="greater",conf.level = 0.95)
acc_T <- 0
for(i in c(1:36)) {if(agg_data$agg_T[i]<3){acc_T<-acc_T+1}}
for(i in c(37:72)) {if(agg_data$agg_T[i]>=3){acc_T<-acc_T+1}}
prop.test(x = acc_T, n=72, p = 0.5,alternative ="greater",conf.level = 0.95)
acc_G <- 0
for(i in c(1:36)) {if(agg_data$agg_G[i]<3){acc_G<-acc_G+1}}
for(i in c(37:72)) {if(agg_data$agg_G[i]>=3){acc_G<-acc_G+1}}
prop.test(x = acc_G, n=72, p = 0.5,alternative ="greater",conf.level = 0.95)
```

*Side-by-side graph with original graph is ideal here*

###Exploratory analyses

## Discussion

### Summary of Replication Attempt

Open the discussion section with a paragraph summarizing the primary result from the confirmatory analysis and the assessment of whether it replicated, partially replicated, or failed to replicate the original result.  

### Commentary

Add open-ended commentary (if any) reflecting (a) insights from follow-up exploratory analysis, (b) assessment of the meaning of the replication (or not) - e.g., for a failure to replicate, are the differences between original and present study ones that definitely, plausibly, or are unlikely to have been moderators of the result, and (c) discussion of any objections or challenges raised by the current and original authors about the replication attempt.  None of these need to be long.
